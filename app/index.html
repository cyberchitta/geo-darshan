<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Geo Darshan Labeler</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/georaster@1.6.0/dist/georaster.browser.bundle.min.js"></script>
  <script src="https://unpkg.com/georaster-layer-for-leaflet@3.10.0/dist/georaster-layer-for-leaflet.min.js"></script>
  <script src="https://unpkg.com/@tensorflow/tfjs@4.15.0/dist/tf.min.js"></script>
  <script src="https://unpkg.com/geotiff@2.1.3/dist-browser/geotiff.js"></script>
  <link rel="stylesheet" href="css/viewer.css" />
</head>

<body>
  <div class="viewer-container">
    <div class="main-content">
      <div id="map" class="map-container"></div>
    </div>
    <div class="right-panel">
      <div id="svelte-legend-panel" class="legend-panel-container"></div>
    </div>
  </div>
  <div id="loading-overlay" class="loading-overlay hidden">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading cluster data...</div>
    <div class="loading-progress-bar">
      <div id="progress-fill" class="progress-fill"></div>
    </div>
  </div>
  <script type="module">
    import { mount } from "svelte";
    import AppContext from "./AppContext.svelte";
    import { GeoRasterAdapter } from "./js/raster-handler.js";

    const rasterHandler = new GeoRasterAdapter();
    window.rasterHandler = rasterHandler;
    window.GeoRasterAdapter = GeoRasterAdapter;
    document.addEventListener("DOMContentLoaded", async () => {
      const svelteLegend = mount(AppContext, {
        target: document.getElementById("svelte-legend-panel"),
        props: {}
      });
      window.svelteLegend = svelteLegend;
    });
  </script>
</body>

</html>